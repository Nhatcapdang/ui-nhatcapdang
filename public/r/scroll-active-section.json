{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "scroll-active-section",
  "title": "Scroll Active Section",
  "description": "A powerful scroll-based component that displays content on the left side while showing an active item preview on the right. Perfect for showcasing features, timelines, or step-by-step processes.",
  "dependencies": [
    "motion"
  ],
  "files": [
    {
      "path": "src/components/scroll/scroll-active-section.tsx",
      "content": "'use client';\n\nimport { cn } from '@/utils/cn';\nimport { motion, useScroll, useTransform } from 'motion/react';\nimport { forwardRef, useEffect, useRef, useState } from 'react';\n\nexport interface ScrollItem {\n  id: string;\n  left: React.ReactNode;\n  right: React.ReactNode;\n}\n\nexport interface ScrollActiveSectionProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  items: ScrollItem[];\n  showProgress?: boolean;\n}\n\nconst ScrollActiveSection = forwardRef<\n  HTMLDivElement,\n  ScrollActiveSectionProps\n>(({ items, showProgress = true, className, ...props }, ref) => {\n  const desktopContainerRef = useRef<HTMLDivElement>(null);\n  const mobileContainerRef = useRef<HTMLDivElement>(null);\n\n  const [activeIndex, setActiveIndex] = useState(0);\n  const itemRefs = useRef<(HTMLDivElement | null)[]>([]);\n\n  const { scrollYProgress } = useScroll({\n    target: desktopContainerRef,\n    offset: ['center end', 'end end'],\n  });\n\n  const progressHeight = useTransform(scrollYProgress, [0, 1], ['15%', '100%']);\n\n  useEffect(() => {\n    // Mobile scroll handler\n    const handleMobileScroll = () => {\n      if (!mobileContainerRef.current) return;\n\n      const container = mobileContainerRef.current;\n      const scrollTop = container.scrollTop;\n      const containerHeight = container.clientHeight;\n      const itemHeight = 300; // Each item is 500px\n\n      // Calculate which item should be active based on scroll position\n      const activeIdx = Math.floor(\n        (scrollTop + containerHeight / 2) / itemHeight\n      );\n      const clampedIndex = Math.max(0, Math.min(activeIdx, items.length - 1));\n\n      setActiveIndex(clampedIndex);\n    };\n\n    // Desktop intersection observer\n    const desktopObserver = new IntersectionObserver(\n      entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            const index = itemRefs.current.indexOf(\n              entry.target as HTMLDivElement\n            );\n            if (index !== -1) {\n              setActiveIndex(index);\n            }\n          }\n        });\n      },\n      {\n        threshold: 0.6,\n        rootMargin: '-20% 0px -20% 0px',\n      }\n    );\n\n    // Capture current ref value for cleanup\n    const mobileContainer = mobileContainerRef.current;\n\n    // Setup mobile scroll listener\n    if (mobileContainer) {\n      mobileContainer.addEventListener('scroll', handleMobileScroll);\n      handleMobileScroll(); // Set initial state\n    }\n\n    // Setup desktop observer\n    itemRefs.current.forEach(ref => {\n      if (ref) desktopObserver.observe(ref);\n    });\n\n    return () => {\n      if (mobileContainer) {\n        mobileContainer.removeEventListener('scroll', handleMobileScroll);\n      }\n      desktopObserver.disconnect();\n    };\n  }, [items]);\n\n  const activeItem = items[activeIndex];\n\n  return (\n    <div ref={ref} className={cn('relative', className)} {...props}>\n      {/* Mobile Layout */}\n      <div className=\" md:hidden flex flex-col\">\n        <div className=\"overflow-hidden\">\n          <motion.div\n            data-slot=\"scroll-right-mobile\"\n            key={activeIndex}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.3, ease: 'easeOut' }}\n            className=\"h-full p-1 flex items-center justify-center\"\n          >\n            {activeItem.right}\n          </motion.div>\n        </div>\n        <div className=\"overflow-y-auto h-[400px]\" ref={mobileContainerRef}>\n          <div data-slot=\"scroll-container-mobile\" className=\"relative\">\n            {items.map((item, index) => (\n              <div\n                data-slot=\"scroll-left-mobile\"\n                key={item.id}\n                ref={el => {\n                  if (el) {\n                    itemRefs.current[index] = el;\n                  }\n                }}\n                className={cn('min-h-[200px] py-4 flex items-center', {\n                  'opacity-100': index === activeIndex,\n                  'opacity-60': index !== activeIndex,\n                })}\n              >\n                {item.left}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Desktop Layout */}\n      <div className=\"hidden md:flex gap-8\">\n        <div\n          data-slot=\"scroll-container\"\n          ref={desktopContainerRef}\n          className=\"flex-1 relative\"\n        >\n          {showProgress && (\n            <div className=\"absolute left-0 top-0 w-px bg-border/30 h-full\">\n              <motion.div\n                data-slot=\"scroll-progress\"\n                className=\"w-full bg-primary origin-top\"\n                style={{ height: progressHeight }}\n              />\n            </div>\n          )}\n\n          {items.map((item, index) => (\n            <div\n              data-slot=\"scroll-left\"\n              key={item.id}\n              ref={el => {\n                if (el) {\n                  itemRefs.current[index] = el;\n                }\n              }}\n              className={cn('min-h-[30vh] py-8', {\n                'opacity-100': index === activeIndex,\n                'opacity-60': index !== activeIndex,\n              })}\n            >\n              {item.left}\n            </div>\n          ))}\n        </div>\n\n        <motion.div\n          data-slot=\"scroll-right\"\n          key={activeIndex}\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, ease: 'easeOut' }}\n          className=\"flex-1 sticky top-[25%] h-fit\"\n        >\n          {activeItem.right}\n        </motion.div>\n      </div>\n    </div>\n  );\n});\n\nScrollActiveSection.displayName = 'ScrollActiveSection';\n\nexport { ScrollActiveSection };\n",
      "type": "registry:component",
      "target": "src/nhatcapdang/scroll-active-section.tsx"
    }
  ],
  "type": "registry:component"
}